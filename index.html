<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Romaja Keyboard</title><style>body{font-family:Arial,sans-serif;background-color:#f7f7f7;margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;flex-direction:column;text-align:center}h1{font-size:36px;color:#333;margin-bottom:10px}h2{font-size:18px;color:#666;margin-top:0;margin-bottom:30px}#editor{width:100%;max-width:600px;height:200px;font-family:'Courier New',Courier,monospace;font-size:18px;padding:10px;border:2px solid #ccc;border-radius:8px;background-color:#fff;color:#333;transition:all .3s ease;resize:vertical;box-sizing:border-box}#editor:focus{border-color:#007bff;outline:0;background-color:#fff}#editor:not(:focus){background-color:#f1f1f1}.keyboard{margin-top:20px;display:flex;flex-wrap:wrap;justify-content:center;gap:6px;width:100%;max-width:700px}.key{width:45px;height:55px;font-size:18px;font-family:'Courier New',Courier,monospace;background-color:#f0f0f0;border:1px solid #ccc;border-radius:5px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column}.key:hover{background-color:#007bff;color:#fff}.key:active{background-color:#0056b3}.key.illuminated{background-color:#007bff;color:#fff;box-shadow:0 0 10px #007bff}.key .label{font-size:12px;font-family:Arial,sans-serif;color:#007bff;margin-top:5px}.key.large{width:100px}.key.extra-large{width:140px}.row{display:flex;justify-content:center;gap:6px}.footer{margin-top:30px;color:#b7b7c7;font-size:14px;line-height:1.2}.footer p{margin:0}</style><h1>Romaja Keyboard</h1><h2>The only korean phonetic keyboard <span style=text-decoration:underline>in the world</span>!</h2><textarea cols=40 id=editor name=editor rows=8 style=font-size:20px;direction:ltr></textarea><div class=keyboard><div class=row><button class=key data-key=KeyQ>„Öá <span class=label>q</span></button> <button class=key data-key=KeyW>„Ö° <span class=label>w</span></button> <button class=key data-key=KeyE>„Öî <span class=label>e</span></button> <button class=key data-key=KeyR>„Ñπ <span class=label>r</span></button> <button class=key data-key=KeyT>„Öå <span class=label>t</span></button> <button class=key data-key=KeyY>„Öê <span class=label>y</span></button> <button class=key data-key=KeyU>„Öú <span class=label>u</span></button> <button class=key data-key=KeyI>„Ö£ <span class=label>i</span></button> <button class=key data-key=KeyO>„Öó <span class=label>o</span></button> <button class=key data-key=KeyP>„Öç <span class=label>p</span></button></div><div class=row><button class=key data-key=KeyA>„Öè <span class=label>a</span></button> <button class=key data-key=KeyS>„ÖÖ <span class=label>s</span></button> <button class=key data-key=KeyD>„Ñ∑ <span class=label>d</span></button> <button class=key data-key=KeyF>„Öë <span class=label>f</span></button> <button class=key data-key=KeyG>„Ñ± <span class=label>g</span></button> <button class=key data-key=KeyH>„Öé <span class=label>h</span></button> <button class=key data-key=KeyJ>„Öà <span class=label>j</span></button> <button class=key data-key=KeyK>„Öã <span class=label>k</span></button> <button class=key data-key=KeyL>„Öõ <span class=label>l</span></button></div><div class=row><button class=key data-key=KeyZ>„Öï <span class=label>z</span></button> <button class=key data-key=KeyX>„Ö† <span class=label>x</span></button> <button class=key data-key=KeyC>„Öä <span class=label>c</span></button> <button class=key data-key=KeyV>„Öì <span class=label>v</span></button> <button class=key data-key=KeyB>„ÖÇ <span class=label>b</span></button> <button class=key data-key=KeyN>„Ñ¥ <span class=label>n</span></button> <button class=key data-key=KeyM>„ÖÅ <span class=label>m</span></button></div></div><div class=footer><p>(Use computer keyboard)<p>üÖÆ No rights reserved</div><script>const keys = document.querySelectorAll('.key');

        // Add keydown and keyup listeners
        window.addEventListener('keydown', (event) => {
            const keyElement = document.querySelector(`.key[data-key="${event.code}"]`);
            if (keyElement) {
                keyElement.classList.add('illuminated');
            }
        });

        window.addEventListener('keyup', (event) => {
            const keyElement = document.querySelector(`.key[data-key="${event.code}"]`);
            if (keyElement) {
                keyElement.classList.remove('illuminated');
            }
        });</script><div id=keyboard><script>!function(){var k={};k.util={mobile:/Android|webOS|iPhone|iPad|iPod|IEMobile|Opera Mini/i.test(navigator.userAgent),opera:!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),mozilla:"undefined"!=typeof InstallTrigger,windowWidth:function(){var t=window.document.documentElement.clientWidth,e=window.document.body;return"CSS1Compat"===window.document.compatMode&&t||e&&e.clientWidth||t},code:function(t){if(!t)t=window.event;return null!=t.code&&null!=t.key?t.code:"Unidentified"},keyCode:function(t){if(!t)t=window.event;var e=t.keyCode;if(this.mozilla)switch(e){case 59:e=186;break;case 107:e=187;break;case 109:e=189;break;case 61:e=187;break;case 173:e=189}if(this.opera)switch(e){case 59:e=186;break;case 61:e=187;break;case 109:e=189}return 18==e&&t.location&&2==t.location&&(e=255),e},preventDefault:function(t){if(!t)t=window.event;t.preventDefault?t.preventDefault():t.returnValue=!1},srcId:function(t,e,n){if(!t)t=window.event;var o;for(t.target?o=t.target:t.srcElement&&(o=t.srcElement),3==o.nodeType&&(o=target.parentNode);o.tagName.toLowerCase()!=n;)if((o=o.parentNode)==e||"body"==o.tagName.toLowerCase())return null;return o.id},insertAtCaret:function(t,e){var n=this.getSelectionStart(t),o=this.getSelectionEnd(t),i=t.value.length;t.value=t.value.substring(0,n)+e+t.value.substring(o,i),this.setCaretPosition(t,n+e.length,0)},deleteAtCaret:function(t,e,n){var o=this.getSelectionStart(t),i=this.getSelectionEnd(t),a=t.value.length;o<e&&(e=o),a<i+n&&(n=a-i);var r=t.value.substring(o-e,i+n);return t.value=t.value.substring(0,o-e)+t.value.substring(i+n),this.setCaretPosition(t,o-e,0),r},getSelectionStart:function(t){if(t.focus(),void 0!==t.selectionStart)return t.selectionStart;if(document.selection){var e=document.selection.createRange();if(null==e)return 0;var n=t.createTextRange(),o=n.duplicate();return n.moveToBookmark(e.getBookmark()),o.setEndPoint("EndToStart",n),o.text.length}return 0},getSelectionEnd:function(t){if(t.focus(),void 0!==t.selectionEnd)return t.selectionEnd;if(document.selection){var e=document.selection.createRange();if(null==e)return 0;var n=t.createTextRange(),o=n.duplicate();return n.moveToBookmark(e.getBookmark()),o.setEndPoint("EndToStart",n),o.text.length+e.text.length}return t.value.length},setCaretPosition:function(t,e,n){var o=t.value.length;if(o<e&&(e=o),o<e+n&&(n=o-n),t.focus(),t.setSelectionRange)t.setSelectionRange(e,e+n);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e+n),i.moveStart("character",e),i.select()}t.focus()},selectAll:function(t){this.setCaretPosition(t,0,t.value.length)},fromCharCodeS:function(){for(var t,e,n,o=arguments.length,i="",a=0;a<o;a++)(n=arguments[a])<1114112&&65535<n?(t=Math.floor((n-65536)/1024)+55296,e=(n-65536)%1024+56320,i+=String.fromCharCode(t,e)):n<65536&&(i+=String.fromCharCode(n));return i}},k.layout=function(){this.keys=[],this.deadkeys=[],this.dir="ltr",this.name="US",this.lang="en"},k.layout.prototype.loadDefault=function(){this.keys=[{i:"k0",c:"0",n:"`",s:"~"},{i:"k1",c:"0",n:"1",s:"!"},{i:"k2",c:"0",n:"2",s:"@"},{i:"k3",c:"0",n:"3",s:"#"},{i:"k4",c:"0",n:"4",s:"$"},{i:"k5",c:"0",n:"5",s:"%"},{i:"k6",c:"0",n:"6",s:"^"},{i:"k7",c:"0",n:"7",s:"&"},{i:"k8",c:"0",n:"8",s:"*"},{i:"k9",c:"0",n:"9",s:"("},{i:"k10",c:"0",n:"0",s:")"},{i:"k11",c:"0",n:"-",s:"_"},{i:"k12",c:"0",n:"=",s:"+"},{i:"k13",c:"1",n:"q",s:"Q"},{i:"k14",c:"1",n:"w",s:"W"},{i:"k15",c:"1",n:"e",s:"E"},{i:"k16",c:"1",n:"r",s:"R"},{i:"k17",c:"1",n:"t",s:"T"},{i:"k18",c:"1",n:"y",s:"Y"},{i:"k19",c:"1",n:"u",s:"U"},{i:"k20",c:"1",n:"i",s:"I"},{i:"k21",c:"1",n:"o",s:"O"},{i:"k22",c:"1",n:"p",s:"P"},{i:"k23",c:"0",n:"[",s:"{"},{i:"k24",c:"0",n:"]",s:"}"},{i:"k25",c:"0",n:"\\",s:"|"},{i:"k26",c:"1",n:"a",s:"A"},{i:"k27",c:"1",n:"s",s:"S"},{i:"k28",c:"1",n:"d",s:"D"},{i:"k29",c:"1",n:"f",s:"F"},{i:"k30",c:"1",n:"g",s:"G"},{i:"k31",c:"1",n:"h",s:"H"},{i:"k32",c:"1",n:"j",s:"J"},{i:"k33",c:"1",n:"k",s:"K"},{i:"k34",c:"1",n:"l",s:"L"},{i:"k35",c:"0",n:";",s:":"},{i:"k36",c:"0",n:"'",s:'"'},{i:"k37",c:"1",n:"z",s:"Z"},{i:"k38",c:"1",n:"x",s:"X"},{i:"k39",c:"1",n:"c",s:"C"},{i:"k40",c:"1",n:"v",s:"V"},{i:"k41",c:"1",n:"b",s:"B"},{i:"k42",c:"1",n:"n",s:"N"},{i:"k43",c:"1",n:"m",s:"M"},{i:"k44",c:"0",n:",",s:"<"},{i:"k45",c:"0",n:".",s:">"},{i:"k46",c:"0",n:"/",s:"?"},{i:"k47",c:"0",n:"\\",s:"|"}],this.deadkeys=[],this.dir="ltr",this.name="US",this.lang="en"},k.layout.prototype.load=function(t){this.keys=t.keys,this.deadkeys=t.deadkeys,this.dir=t.dir,this.name=t.name,this.lang=t.lang?t.lang:"en"},k.layout.parser={keys:{192:"Backquote",49:"Digit1",50:"Digit2",51:"Digit3",52:"Digit4",53:"Digit5",54:"Digit6",55:"Digit7",56:"Digit8",57:"Digit9",48:"Digit0",189:"Minus",187:"Equal",81:"KeyQ",87:"KeyW",69:"KeyE",82:"KeyR",84:"KeyT",89:"KeyY",85:"KeyU",73:"KeyI",79:"KeyO",80:"KeyP",219:"BracketLeft",221:"BracketRight",220:"Backslash",65:"KeyA",83:"KeyS",68:"KeyD",70:"KeyF",71:"KeyG",72:"KeyH",74:"KeyJ",75:"KeyK",76:"KeyL",186:"Semicolon",222:"Quote",90:"KeyZ",88:"KeyX",67:"KeyC",86:"KeyV",66:"KeyB",78:"KeyN",77:"KeyM",188:"Comma",190:"Period",191:"Slash",17:"ControlLeft",18:"AltLeft",16:"ShiftLeft",32:"Space",27:"Escape",20:"CapsLock",13:"Enter",255:"AltRight"},codes:{Backquote:0,Digit1:1,Digit2:2,Digit3:3,Digit4:4,Digit5:5,Digit6:6,Digit7:7,Digit8:8,Digit9:9,Digit0:10,Minus:11,Equal:12,KeyQ:13,KeyW:14,KeyE:15,KeyR:16,KeyT:17,KeyY:18,KeyU:19,KeyI:20,KeyO:21,KeyP:22,BracketLeft:23,BracketRight:24,Backslash:25,KeyA:26,KeyS:27,KeyD:28,KeyF:29,KeyG:30,KeyH:31,KeyJ:32,KeyK:33,KeyL:34,Semicolon:35,Quote:36,KeyZ:37,KeyX:38,KeyC:39,KeyV:40,KeyB:41,KeyN:42,KeyM:43,Comma:44,Period:45,Slash:46,IntlBackslash:47},getKeyLegend:function(t,e){for(var n=t.length,o=0;o<n;o++)if(t[o].i==e)return t[o].n?t[o].n:"";return 0},getKey:function(t,e){for(var n=t.length,o=0;o<n;o++)if(t[o].i==e)return t[o];return null},isDeadkey:function(t,e){if(!t)return!1;for(var n=t.length,o=0;o<n;o++)if(t[o].k==e)return!0;return!1},getMappedValue:function(t,e,n){if(!t)return"";for(var o=t.length,i=0;i<o;i++)if(t[i].k==n&&t[i].b==e)return t[i].c;return""},getState:function(t,e,n,o,i,a){var r="n";return e||n||!t?e||!n||t?!e&&n&&t?r="s":!e||n||t?e&&!n&&t?r="t":e&&n&&!t?r="s":e&&n&&t&&(r="f"):r="n":r="s":r="n",o&&("1"==i?"n"==r?r="s":"s"==r&&(r="n"):"SGCap"==i&&("n"==r?r="y":"s"==r&&(r="z"))),a&&("n"==r?r="t":"s"==r&&(r="f")),r}},k.keyboard=function(t,e){this.defaultLayout=new k.layout,this.defaultLayout.loadDefault(),this.virtualLayout=new k.layout,this.virtualLayout.loadDefault(),this.currentLayout=this.virtualLayout,this.shift=!1,this.shiftOn=!1,this.caps=!1,this.capsOn=!1,this.alt=!1,this.altGr=!1,this.altGrOn=!1,this.ctrl=!1,this.altCtrlOn=!1,this.fontSize=18,this.counter=0,this.interval=0,this.prev="",this.emoji=!1,this.emojiStartingCodePoint=128512,this.emojiCurrentCodePoint=128512,this.cancelkeypress=!1,this.customOnBackspace=function(t){},this.customOnEnter=function(){},this.customOnSpace=function(){return!1},this.customOnKey=function(t){return!1},this.customOnEsc=function(){},this.customDrawKeyboard=function(t){return t},this.textbox=document.getElementById(e),this.textbox.style.fontSize="18px",k.util.mobile&&(this.textbox.readOnly=!0);var n=['<div id="branah-keyboard">'];if(n.push('<div id="branah-keyboard-alpha">'),k.util.windowWidth()<640){for(var o=13;o<23;o++);for(o=26;o<35;o++);for(o=37;o<44;o++);for(o=0;o<13;o++);for(o=23;o<26;o++);for(o=35;o<37;o++);for(o=44;o<48;o++);}else{for(o=0;o<13;o++);for(o=13;o<25;o++);n.push('<utton id="branah-caps-lock"><span></span></button>');for(o=26;o<37;o++);n.push('<utton id="branah-left-shift"><span></span></button>');for(o=37;o<47;o++);n.push('<utton id="branah-right-shift"><span></span></button>'),n.push('<utton id="branah-left-ctrl"><span></span></button>'),n.push('<utton id="branah-left-alt"><span></span></button>'),n.push('<utton id="branah-right-alt"><span></span></button>'),n.push('<utton id="branah-right-ctrl"><span></span></button>')}n.push('<div id="branah-keyboard-emoji" style="display:none">'),document.getElementById(t).innerHTML=n.join(""),this.wireEvents(),this.drawKeyboard()},k.keyboard.prototype.loadDefaultLayout=function(t){this.defaultLayout.load(t),this.drawKeyboard()},k.keyboard.prototype.loadVirtualLayout=function(t){this.virtualLayout.load(t),this.drawKeyboard(),this.textbox.style.direction=this.attr("dir")},k.keyboard.prototype.switchLayout=function(){this.currentLayout=this.currentLayout===this.defaultLayout?this.virtualLayout:this.defaultLayout,this.reset(),this.drawKeyboard(),this.textbox.style.direction=this.attr("dir")},k.keyboard.prototype.getFontSize=function(){return this.fontSize},k.keyboard.prototype.setFontSize=function(t){this.fontSize=t,this.textbox.style.fontSize=this.fontSize+"px"},k.keyboard.prototype.onEsc=function(){this.switchLayout(),this.customOnEsc()},k.keyboard.prototype.onShift=function(){this.shift=!this.shift,this.drawKeyboard()},k.keyboard.prototype.onAlt=function(){this.alt=!this.alt,this.drawKeyboard()},k.keyboard.prototype.onAltGr=function(){this.altGr=!this.altGr,this.drawKeyboard()},k.keyboard.prototype.onCtrl=function(){this.ctrl=!this.ctrl,this.drawKeyboard()},k.keyboard.prototype.onCapsLock=function(){this.caps=!this.caps,this.drawKeyboard()},k.keyboard.prototype.onBackspace=function(){if(""!=this.prev)this.prev="",this.shift=!1,this.drawKeyboard();else{var t=k.util.deleteAtCaret(this.textbox,1,0);if(0<t.length){var e=t.charCodeAt(0);e<57344&&56319<e&&(t=k.util.deleteAtCaret(this.textbox,1,0)+t)}this.customOnBackspace(t)}},k.keyboard.prototype.onEnter=function(){k.util.insertAtCaret(this.textbox,"\n"),this.customOnEnter()},k.keyboard.prototype.onSpace=function(){this.customOnSpace()||k.util.insertAtCaret(this.textbox," ")},k.keyboard.prototype.onEmoji=function(){this.emoji=!this.emoji,this.emojiCurrentCodePoint=this.emojiStartingCodePoint,this.drawKeyboard()},k.keyboard.prototype.onEmojiScrollUp=function(){this.emojiCurrentCodePoint-=14,this.emojiCurrentCodePoint<0&&(this.emojiCurrentCodePoint=0),this.drawKeyboard()},k.keyboard.prototype.onEmojiScrollDown=function(){this.emojiCurrentCodePoint+=14,this.drawKeyboard()},k.keyboard.prototype.onEmojiKey=function(t){k.util.insertAtCaret(this.textbox,k.util.fromCharCodeS(this.emojiCurrentCodePoint+parseInt(t)-100))},k.keyboard.prototype.attr=function(t){return"dir"==t?this.currentLayout.dir:"lang"==t?this.currentLayout.lang:"name"==t?this.currentLayout.name:""},k.keyboard.prototype.reset=function(){this.shift=!1,this.caps=!1,this.alt=!1,this.altGr=!1,this.ctrl=!1,this.counter=0,this.interval=0,this.prev=""},k.keyboard.prototype.stopRepeat=function(){0!=this.interval&&(clearInterval(this.interval),this.counter=0,this.interval=0)},k.keyboard.prototype.onKey=function(t){var e=k.layout.parser.getKey(this.currentLayout.keys,t);if(e){var n=k.layout.parser.getState(this.ctrl,this.alt,this.shift,this.caps,e.c?e.c:"0",this.altGr),o=e[n]?e[n]:"";if(""!=this.prev){var i=k.layout.parser.getMappedValue(this.currentLayout.deadkeys,o,this.prev);""!=i&&k.util.insertAtCaret(this.textbox,i),this.prev=""}else k.layout.parser.isDeadkey(this.currentLayout.deadkeys,o)?this.prev=o:""!=o&&(this.customOnKey(o)||k.util.insertAtCaret(this.textbox,o))}},k.keyboard.prototype.getEmojiHTML=function(){var t=14;k.util.windowWidth()<640&&(t=6);for(var e=100;e<100+5*t;e++);return[].join("")},k.keyboard.prototype.drawKeyboard=function(){if(this.emoji)return document.getElementById("branah-keyboard-emoji").innerHTML=this.getEmojiHTML(),document.getElementById("branah-keyboard-emoji").style.display="",void(document.getElementById("branah-keyboard-alpha").style.display="none");if(document.getElementById("branah-keyboard-emoji").style.display="none",document.getElementById("branah-keyboard-alpha").style.display="",this.currentLayout.keys){for(var t,e,n,o,i=this.currentLayout.keys.length,a=0;a<i;a++)if(e=this.currentLayout.keys[a],document.getElementById("branah-"+e.i)){var r=this.ctrl,s=this.alt,u=this.shift,l=this.caps,c=this.altGr;this.shiftOn&&(u=!0),this.capsOn&&(l=!0),this.altCtrlOn&&(s=r=!0),this.altGrOn&&(c=!0),o=e[n=k.layout.parser.getState(r,s,u,l,e.c?e.c:"0",c)]?e[n]:"",""!=this.prev&&(o=k.layout.parser.getMappedValue(this.currentLayout.deadkeys,o,this.prev)),(t=[]).push('<div class="branah-label-reference">',k.layout.parser.getKeyLegend(this.defaultLayout.keys,e.i),"</div>"),u?""==o&&(o="&nbsp;"):(""==(o=this.customDrawKeyboard(o))&&(o="&nbsp;"),t.push('<div class="branah-label-natural" style="font-size:',this.fontSize,'px;">&nbsp;',o,"</div>")),document.getElementById("branah-"+e.i).innerHTML=t.join("")}var h=document.getElementById("branah-left-ctrl"),d=document.getElementById("branah-right-ctrl");h&&d&&(r?(h.className="branah-recessed"+(this.ctrl?"":"-hover"),d.className="branah-recessed"+(this.ctrl?"":"-hover")):(h.className="",d.className=""));var f=document.getElementById("branah-left-alt");f&&(f.className=s?"branah-recessed"+(this.alt?"":"-hover"):"");var g=document.getElementById("branah-right-alt");g&&(g.className=c?"branah-recessed"+(this.altGr?"":"-hover"):"");var y=document.getElementById("branah-left-shift"),m=document.getElementById("branah-right-shift");y&&m&&(u?(y.className="branah-recessed"+(this.shift?"":"-hover"),m.className="branah-recessed"+(this.shift?"":"-hover")):(y.className="",m.className=""));var p=document.getElementById("branah-caps-lock");p&&(p.className=l?"branah-recessed"+(this.caps?"":"-hover"):"");var b=document.getElementById("branah-escape");b&&(this.currentLayout===this.defaultLayout?b.className="branah-recessed":b.className="")}};var n=!(k.keyboard.prototype.wireEvents=function(){var i=this;document.getElementById("branah-keyboard").onmousedown=function(t){var e=k.util.srcId(t,this,"button");e&&(i.interval=setInterval(function(){if(i.counter++,5<i.counter)switch(e){case"branah-backspace":case"branah-emoji-backspace":i.onBackspace();break;case"branah-enter":case"branah-emoji-enter":i.onEnter();break;case"branah-emoji-scrollup":i.onEmojiScrollUp();break;case"branah-emoji-scrolldown":i.onEmojiScrollDown();break;default:-1!=e.search("^branah-k([0-9]|[1-3][0-9]|4[0-7])$")?(i.onKey(e.substr(7)),i.shift=!1,i.alt=!1,i.ctrl=!1,i.altGr=!1,i.drawKeyboard()):-1!=e.search("^branah-k1[0-6][0-9]$")&&i.onEmojiKey(e.substr(8))}},50))},document.getElementById("branah-keyboard").onmouseup=function(t){i.stopRepeat()},document.getElementById("branah-keyboard").onmouseout=function(t){i.stopRepeat()},document.getElementById("branah-keyboard").onclick=function(t){var e=k.util.srcId(t,this,"button");if(e)switch(e){case"branah-left-shift":case"branah-right-shift":i.onShift();break;case"branah-left-alt":i.onCtrl(),i.onAlt();break;case"branah-right-alt":i.onAltGr();break;case"branah-left-ctrl":case"branah-right-ctrl":i.onAlt(),i.onCtrl();break;case"branah-escape":i.onEsc();break;case"branah-caps-lock":i.onCapsLock();break;case"branah-backspace":case"branah-emoji-backspace":i.onBackspace();break;case"branah-enter":case"branah-emoji-enter":i.onEnter();break;case"branah-space":i.onSpace();break;case"branah":case"branah-emoji":i.onEmoji();break;case"branah-emoji-scrollup":i.onEmojiScrollUp();break;case"branah-emoji-scrolldown":i.onEmojiScrollDown();break;default:-1!=e.search("^branah-k([0-9]|[1-3][0-9]|4[0-7])$")?(i.onKey(e.substr(7)),i.shift=!1,i.alt=!1,i.ctrl=!1,i.altGr=!1,i.drawKeyboard()):-1!=e.search("^branah-k1[0-6][0-9]$")&&i.onEmojiKey(e.substr(8))}},"ontouchstart"in document.documentElement&&k.util.mobile||(document.getElementById("branah-left-shift").onmouseover=function(t){i.shiftOn=!0,i.drawKeyboard()},document.getElementById("branah-right-shift").onmouseover=function(t){i.shiftOn=!0,i.drawKeyboard()},document.getElementById("branah-left-shift").onmouseout=function(t){i.shiftOn=!1,i.drawKeyboard()},document.getElementById("branah-right-shift").onmouseout=function(t){i.shiftOn=!1,i.drawKeyboard()},document.getElementById("branah-left-ctrl").onmouseover=function(t){i.altCtrlOn=!0,i.drawKeyboard()},document.getElementById("branah-right-ctrl").onmouseover=function(t){i.altCtrlOn=!0,i.drawKeyboard()},document.getElementById("branah-left-ctrl").onmouseout=function(t){i.altCtrlOn=!1,i.drawKeyboard()},document.getElementById("branah-right-ctrl").onmouseout=function(t){i.altCtrlOn=!1,i.drawKeyboard()},document.getElementById("branah-left-alt").onmouseover=function(t){i.altCtrlOn=!0,i.drawKeyboard()},document.getElementById("branah-right-alt").onmouseover=function(t){i.altGrOn=!0,i.drawKeyboard()},document.getElementById("branah-left-alt").onmouseout=function(t){i.altCtrlOn=!1,i.drawKeyboard()},document.getElementById("branah-right-alt").onmouseout=function(t){i.altGrOn=!1,i.drawKeyboard()},document.getElementById("branah-caps-lock").onmouseover=function(t){i.capsOn=!0,i.drawKeyboard()},document.getElementById("branah-caps-lock").onmouseout=function(t){i.capsOn=!1,i.drawKeyboard()}),i.textbox.onkeydown=function(t){var e=k.util.code(t);if("Unidentified"==e){var n=k.util.keyCode(t);e=k.layout.parser.keys[n+""]}if(("KeyA"!=e&&"KeyY"!=e&&"KeyZ"!=e&&"KeyC"!=e&&"KeyV"!=e&&"KeyX"!=e||!i.ctrl||i.alt||i.shift)&&(i.currentLayout!=i.defaultLayout||"Escape"==e))switch(e){case"ControlLeft":case"ControlRight":i.ctrl=!1,i.onCtrl();break;case"AltLeft":i.alt=!1,i.onAlt();break;case"AltRight":i.altGr=!1,i.onAltGr();break;case"ShiftLeft":case"ShiftRight":i.shift=!1,i.onShift();break;case"Escape":i.onEsc();break;case"CapsLock":t.getModifierState&&t.getModifierState("CapsLock")&&(i.caps=!1),i.onCapsLock();break;case"Backspace":i.onBackspace(),k.util.preventDefault(t);break;case"Space":i.onSpace(),k.util.preventDefault(t);break;case"Enter":i.onEnter(),k.util.preventDefault(t);break;default:var o=k.layout.parser.codes[e];null!=o&&(i.onKey("k"+o),i.drawKeyboard(),k.util.preventDefault(t),i.cancelkeypress=!0)}},k.util.opera&&(i.textbox.onkeypress=function(t){i.cancelkeypress&&(k.util.preventDefault(t),i.cancelkeypress=!1)}),i.textbox.onkeyup=function(t){var e=k.util.code(t);if("Unidentified"==e){var n=k.util.keyCode(t);e=k.layout.parser.keys[n+""]}switch(e){case"ControlLeft":case"ControlRight":i.ctrl=!0,i.onCtrl();break;case"AltLeft":i.alt=!0,i.onAlt();break;case"AltRight":i.altGr=!0,i.onAltGr();break;case"ShiftLeft":case"ShiftRight":i.shift=!0,i.onShift()}}});try{var t="item";localStorage.setItem(t,t),localStorage.removeItem(t),n=!0}catch(t){}var o=!1;try{"item"==(s=JSON.parse(JSON.stringify({item:"item"}))).item&&(o=!0)}catch(t){}var i=null,a={undo:[],redo:[],layout:null,fontSize:20},r="korean",e=(i=new k.keyboard("keyboard","editor")).textbox;e.focus();var s,l=!(cors=function(t,e,n,o,i,a,r){if("undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest){var s=new XMLHttpRequest;s.open(t,e,!0),null!=n&&s.setRequestHeader("Content-Type",n),s.onreadystatechange=function(){4===s.readyState&&(200===s.status?i(r?s.responseXML:s.responseText):""!=s.responseText?a(s.responseText):a(s.statusText))},s.send(o)}else if("undefined"!=typeof XDomainRequest){var u=new XDomainRequest;u.open(t,e),null!=n&&u.setRequestHeader("Content-Type",n),u.send(o),u.onerror=a,u.onload=function(){i(r?u.responseXML:u.responseText)}}else l=!1});("undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?l=!0:"undefined"!=typeof XDomainRequest&&(l=!0),0==l)&&(document.getElementById("response").style.backgroundColor="#FBFFCF");n&&o&&(null!=(s=JSON.parse(localStorage.getItem(r)))&&(s.layout&&(a.layout=s.layout),s.undo&&(a.undo=s.undo),s.redo&&(a.redo=s.redo),s.fontSize&&(a.fontSize=s.fontSize)));a.fontSize&&i.setFontSize(a.fontSize);var u=[{Id:"Standard",Name:"Phonetic",Json:{name:"Korean",dir:"ltr",keys:[{i:"k0",c:"0",n:"`",s:"~"},{i:"k1",c:"0",n:"1",s:"!"},{i:"k2",c:"0",n:"2",s:"@"},{i:"k3",c:"0",n:"3",s:"#"},{i:"k4",c:"0",n:"4",s:"$"},{i:"k5",c:"0",n:"5",s:"%"},{i:"k6",c:"0",n:"6",s:"^"},{i:"k7",c:"0",n:"7",s:"&"},{i:"k8",c:"0",n:"8",s:"*"},{i:"k9",c:"0",n:"9",s:"("},{i:"k10",c:"0",n:"0",s:")"},{i:"k11",c:"0",n:"-",s:"_"},{i:"k12",c:"0",n:"=",s:"+"},{i:"k13",c:"1",n:"„Öá",s:""},{i:"k14",c:"1",n:"„Ö°",s:""},{i:"k15",c:"1",n:"„Öî",s:"„Öñ"},{i:"k16",c:"1",n:"„Ñπ",s:""},{i:"k17",c:"1",n:"„Öå",s:""},{i:"k18",c:"1",n:"„Öê",s:"„Öí"},{i:"k19",c:"1",n:"„Öú"},{i:"k20",c:"1",n:"„Ö£"},{i:"k21",c:"1",n:"„Öó",s:""},{i:"k22",c:"1",n:"„Öç",s:""},{i:"k23",c:"0",n:"[",s:"{"},{i:"k24",c:"0",n:"]",s:"}"},{i:"k25",c:"0",n:"\\",s:"|"},{i:"k26",c:"1",n:"„Öè"},{i:"k27",c:"1",n:"„ÖÖ",s:"„ÖÜ"},{i:"k28",c:"1",n:"„Ñ∑",s:"„Ñ∏"},{i:"k29",c:"1",n:"„Öë"},{i:"k30",c:"1",n:"„Ñ±",s:"„Ñ≤"},{i:"k31",c:"1",n:"„Öé"},{i:"k32",c:"1",n:"„Öà",s:"„Öâ"},{i:"k33",c:"1",n:"„Öã"},{i:"k34",c:"1",n:"„Öõ"},{i:"k35",c:"0",n:";",s:":"},{i:"k36",c:"0",n:"'",s:'"'},{i:"k37",c:"1",n:"„Öï"},{i:"k38",c:"1",n:"„Ö†"},{i:"k39",c:"1",n:"„Öä"},{i:"k40",c:"1",n:"„Öì"},{i:"k41",c:"1",n:"„ÖÇ",s:"„ÖÉ"},{i:"k42",c:"1",n:"„Ñ¥"},{i:"k43",c:"1",n:"„ÖÅ"},{i:"k44",c:"0",n:",",s:"<"},{i:"k45",c:"0",n:".",s:">"},{i:"k46",c:"0",n:"/",s:"?"},{i:"k47",c:"0",n:"\\",s:"|"}],deadkeys:[]}}];if(1==u.length)i.loadVirtualLayout(u[0].Json);else{var c=[],h=[];a.layout||(a.layout=u[0].Id);for(var d=!1,f=0;f<u.length;f++)c.push("",0<f?" ":"",'<input id="',u[f].Id,'" = =',a.layout==u[f].Id?" ":""," ",u[f].Name,"</>"),h[f]=new k.layout,h[f].load(u[f].Json),a.layout==u[f].Id&&(i.loadVirtualLayout(u[f].Json),d=!0);0==d&&i.loadVirtualLayout(u[0].Json);var g=document.createElement("p");g.innerHTML=c.join(""),document.getElementById("keyboard").appendChild(g);for(f=0;f<u.length;f++)(function(t,e){document.getElementById(t).onclick=function(){a.layout!=t&&(i.virtualLayout=e,i.currentLayout=i.virtualLayout,i.reset(),i.drawKeyboard(),i.textbox.style.direction=e.dir,a.layout=t,n&&o&&localStorage.setItem(r,JSON.stringify(a))),p(f),i.textbox.focus()}})(u[f].Id,h[f])}String.prototype.lengthS=function(){for(var t,e=this.length,n=0,o=0,i=0;i<e;i++)t=this.charCodeAt(i),n<56320&&55295<n&&t<57344&&56319<t&&(t=0,o++),n=t;return e-o},String.prototype.charCodeAtS=function(t){for(var e,n=this.length,o=0,i=0,a=0;a<n;a++)if(e=this.charCodeAt(a),o<56320&&55295<o&&e<57344&&56319<e&&(e=0,i++),o=e,a-i==t)return e=0,++a<n&&(e=this.charCodeAt(a)),o<56320&&55295<o&&e<57344&&56319<e?1024*(o-55296)+(e-56320)+65536:o;return NaN},String.fromCharCodeS=function(){for(var t,e,n,o=arguments.length,i="",a=0;a<o;a++)(n=arguments[a])<1114112&&65535<n?(t=Math.floor((n-65536)/1024)+55296,e=(n-65536)%1024+56320,i+=String.fromCharCode(t,e)):n<65536&&(i+=String.fromCharCode(n));return i},String.prototype.charAtS=function(t){return String.fromCharCodeS(this.charCodeAtS(t))};var y={IME:null,suggestion:"",buffer:"",suggestionIndex:0,suggestionCount:6,indexArray:[49,50,51,52,53,54,55,56,57,48,32],bgNodes:null,tagMapper:{},loadIME:function(t){this.IME=t.documentElement,this.bgNodes=this.IME.getElementsByTagName("bg"),this.suggestion="",this.buffer="",this.suggestionIndex=0,this.suggestionCount=this.IME.getAttribute("numbers"),this.suggestionCount&&""!=this.suggestionCount||(this.suggestionCount=10)},reset:function(){this.suggestion="",this.buffer="",this.suggestionIndex=0},moveToNextSuggestion:function(){return this.suggestionCount*(this.suggestionIndex+1)<this.suggestion.lengthS()&&(this.suggestionIndex++,!0)},moveToPrevSuggestion:function(){return 0<this.suggestionIndex&&(this.suggestionIndex--,!0)},getLabelFromSuggestion:function(t){if(0==this.suggestion.length||0==t.length)return t;var e=k.util.indexOf(this.indexArray,t.charCodeAt(0));return-1<(e-=10-this.suggestionCount)&&this.suggestionCount*this.suggestionIndex+e<this.suggestion.lengthS()?this.suggestion.charAtS(this.suggestionCount*this.suggestionIndex+e):t},getSuggestions:function(){for(var t,e=this.buffer.length,n=this.IME,o=0;o<e;o++)t=(t=(t=(t=(t=(t=(t=this.buffer.charAt(o)).replace("1","aa")).replace("2","bb")).replace("3","cc")).replace("4","dd")).replace("5","ee")).replace("6","ff"),(n=this.findNode(n.childNodes,t))||(n=this.IME);return n!=this.IME?n.getAttribute("v"):""},onBackspace:function(){this.buffer.length<2?this.reset():(this.buffer=this.buffer.substring(0,this.buffer.length-1),this.suggestion=this.getSuggestions(),this.suggestionIndex=0)},bigramSuggestion:function(t){for(var e=0;e<this.bgNodes.length;e++)bgNodes[e].getAttribute("k")==t&&(this.suggestion=this.bgNodes[e].getAttribute("v"))},composeHan:function(t){var e=t.charCodeAt(t.length-1),n=k.util.indexOf(this.indexArray,e);n-=10-this.suggestionCount,32==e&&(n=0);var o=String.fromCharCode(e);if(null!=this.tagMapper[e])o=this.tagMapper[e];else if(252==e)o="v";else if(-1<n&&this.suggestionCount*this.suggestionIndex+n<this.suggestion.lengthS()){var i=this.suggestion.charAtS(this.suggestionCount*this.suggestionIndex+n);return this.reset(),this.bigramSuggestion(i),i}return this.buffer+=o,this.suggestion=this.getSuggestions(),0==this.suggestion.length&&1==this.buffer.length&&(this.buffer=""),this.suggestionIndex=0,t},findNode:function(t,e){var n,o=t.length;for(f=0;f<o;f++)if((n=t[f]).tagName==e)return n;return null}},m=null;function p(t){null==m?cors("GET","/xml/koreanyale.xml",null,null,function(t){m=t,y.loadIME(t),e.focus()},function(t){},!0):(y.loadIME(m),e.focus())}""==a.layout&&p(),i.customOnKey=function(t){switch(a.layout){case"han ja":if("‚ñ∏"==t&&0<y.suggestion.length)y.moveToNextSuggestion();else if("‚óÇ"==t&&0<y.suggestion.length)y.moveToPrevSuggestion();else{k.util.insertAtCaret(this.textbox,t);var e=k.util.deleteAtCaret(this.textbox,y.buffer.length+t.length,0);k.util.insertAtCaret(this.textbox,y.composeHan(e))}break;case"translite rate":k.util.insertAtCaret(this.textbox,t);e=k.util.deleteAtCaret(this.textbox,2,0);k.util.insertAtCaret(this.textbox,transliterate.compose(e)),e=k.util.deleteAtCaret(this.textbox,2,0),k.util.insertAtCaret(this.textbox,b.composeHangul(e));break;default:k.util.insertAtCaret(this.textbox,t);e=k.util.deleteAtCaret(this.textbox,2,0);k.util.insertAtCaret(this.textbox,b.composeHangul(e))}return!0},i.customOnBackspace=function(t){"ha nja"!=a.layout?1<(t=b.decomposeHangul(t)).length&&k.util.insertAtCaret(this.textbox,b.composeHangul(t.slice(0,-1))):(y.onBackspace(),this.drawKeyboard())},i.customOnSpace=function(){if("han ja"!=a.layout)return!1;k.util.insertAtCaret(this.textbox," ");var t=k.util.deleteAtCaret(this.textbox,y.buffer.length+1,0);return k.util.insertAtCaret(this.textbox,y.composeHan(t)),this.drawKeyboard(),!0},i.customDrawKeyboard=function(t){return"han ja"!=a.layout?t:y.getLabelFromSuggestion(t)},k.util.indexOf=function(t,e){for(var n=t.length,o=0;o<n;o++)if(t[o]==e)return o;return-1};var b={initial:[12593,12594,12596,12599,12600,12601,12609,12610,12611,12613,12614,12615,12616,12617,12618,12619,12620,12621,12622],finale:[0,12593,12594,12595,12596,12597,12598,12599,12601,12602,12603,12604,12605,12606,12607,12608,12609,12610,12612,12613,12614,12615,12616,12618,12619,12620,12621,12622],dMedial:[0,0,0,0,0,0,0,0,0,800,801,820,0,0,1304,1305,1320,0,0,1820],dFinale:[0,0,0,119,0,422,427,0,0,801,816,817,819,825,826,827,0,0,1719,0,1919],SBase:44032,LBase:4352,VBase:12623,TBase:4519,LCount:19,VCount:21,TCount:28,NCount:588,SCount:11172,composeHangul:function(t){var e=t.length;if(0==e)return"";for(var n,o,i,a,r,s,u,l=t.charCodeAt(0),c=String.fromCharCode(l),h=1;h<e;++h)if(n=t.charCodeAt(h),-1!=(o=k.util.indexOf(this.initial,l))&&0<=(i=n-this.VBase)&&i<this.VCount)l=this.SBase+(o*this.VCount+i)*this.TCount,c=c.slice(0,c.length-1)+String.fromCharCode(l);else{if(0<=(u=l-this.SBase)&&u<11145&&u%this.TCount==0){if(-1!=(r=k.util.indexOf(this.finale,n))){l+=r,c=c.slice(0,c.length-1)+String.fromCharCode(l);continue}if(i=u%this.NCount/this.TCount,0<(a=k.util.indexOf(this.dMedial,100*i+(n-this.VBase)))){l+=(a-i)*this.TCount,c=c.slice(0,c.length-1)+String.fromCharCode(l);continue}}if(0<=u&&u<11172&&u%this.TCount!=0){if(r=u%this.TCount,0<=(i=n-this.VBase)&&i<this.VCount){if(0<=(o=k.util.indexOf(this.initial,this.finale[r]))&&o<this.LCount){c=c.slice(0,c.length-1)+String.fromCharCode(l-r),l=this.SBase+(o*this.VCount+i)*this.TCount,c+=String.fromCharCode(l);continue}if(r<this.dFinale.length&&0!=this.dFinale[r]){c=c.slice(0,c.length-1)+String.fromCharCode(l-r+Math.floor(this.dFinale[r]/100)),l=this.SBase+(k.util.indexOf(this.initial,this.finale[this.dFinale[r]%100])*this.VCount+i)*this.TCount,c+=String.fromCharCode(l);continue}}if(0<(s=k.util.indexOf(this.dFinale,100*r+k.util.indexOf(this.finale,n)))){l=l+s-r,c=c.slice(0,c.length-1)+String.fromCharCode(l);continue}}l=n,c+=String.fromCharCode(n)}return c},decomposeHangul:function(t){for(var e,n,o,i,a,r=t.length,s="",u=0;u<r;u++)(n=(e=t.charCodeAt(u))-this.SBase)<0||n>=this.SCount?s+=String.fromCharCode(e):(o=this.initial[Math.floor(n/this.NCount)],i=this.VBase+n%this.NCount/this.TCount,a=this.finale[n%this.TCount],s+=String.fromCharCode(o,i),0!=a&&(s+=String.fromCharCode(a)));return s}},v=document.createElement("p");v.innerHTML="   </span >",document.getElementById("keyboard").appendChild(v);var C=document.getElementById("khanja"),S=document.getElementById("lookup"),E=document.getElementById("definition");function x(t){var e=C.value;if(0!=e.length){var n=e.charAt(0),o=e.charCodeAt(0);o<56320&&55295<o&&(n+=e.charAt(1),o=1024*(o-55296)+(e.charCodeAt(1)-56320)+65536),cors("POST","https://apis.branah.com/lookup/read","application/x-www-form-urlencoded","h="+o.toString()+"&t="+t,function(t){E.innerHTML="0;0"==t?'<span style="color:#e0115f;font-size:'+i.getFontSize()+'px;vertical-align:middle;">'+n+'</span> <span style="color:#e0115f">Hanja not found</span>':t.replace(/0,/g,"").replace(o.toString()+";",'<span style="color:#e0115f;font-size:'+i.getFontSize()+'px;vertical-align:middle;">'+n+'</span> <span style="color:#057cb5">')+"</span>",C.value=""},I,!1)}}function I(){alert("Error connecting to database.")}C.onchange=function(){x("kDefinition")},S.click=function(){x("kDefinition")},null==a.fontSize&&(a.fontSize=i.getFontSize(),n&&o&&localStorage.setItem(r,JSON.stringify(a))),document.getElementById("shrink").onclick=function(){a.fontSize<14||(a.fontSize-=2,i.setFontSize(a.fontSize),i.drawKeyboard(),n&&o&&localStorage.setItem(r,JSON.stringify(a)),e.focus())},document.getElementById("enlarge").onclick=function(){36<a.fontSize||(a.fontSize+=2,i.setFontSize(a.fontSize),i.drawKeyboard(),n&&o&&localStorage.setItem(r,JSON.stringify(a)),e.focus())},document.getElementById("email").onclick=function(){return this.href="mailto: ?body="+e.value,e.focus(),!0},document.getElementById("selectAll").onclick=function(){k.util.setCaretPosition(e,0,e.value.length),e.focus()},document.getElementById("copy").onclick=function(){k.util.setCaretPosition(e,0,e.value.length),document.execCommand("copy")?k.util.setCaretPosition(e,e.value.length,e.value.length):alert("Your browser does not allow automated copy. To copy the text in the text area, you can click Select All button and right click on the selected text. Then click the Copy option."),e.focus()},n&&o?(0<a.undo.length&&(e.value=a.undo.pop()),document.getElementById("clearAll").onclick=function(){(e.value.length<10||confirm("Are you sure you want to clear all the text?"))&&(a.undo=[],a.redo=[],localStorage.setItem(r,JSON.stringify(a)),e.value=""),e.focus()},document.getElementById("undo").onclick=function(){if(0!=a.undo.length){var t=a.undo.pop();t!=e.value?(a.redo.push(e.value),e.value=t):(e.value=0==a.undo.length?"":a.undo[a.undo.length-1],a.redo.push(t)),localStorage.setItem(r,JSON.stringify(a)),e.focus()}},document.getElementById("redo").onclick=function(){if(0!=a.redo.length){var t=a.redo.pop();e.value=t,a.undo.push(t),localStorage.setItem(r,JSON.stringify(a)),e.focus()}},setInterval(function(){var t=e.value;0==a.undo.length&&0==t.length||0!=a.undo.length&&t==a.undo[a.undo.length-1]||(a.undo.push(t),localStorage.setItem(r,JSON.stringify(a)))},3e3)):(document.getElementById("undo").style.display="none",document.getElementById("redo").style.display="none",document.getElementById("clearAll").style.display="none"),document.getElementById("postToX").onclick=function(){return document.getElementById("postToX").href="https://x.com/intent/post?text="+encodeURIComponent(e.value),e.focus(),!0},document.getElementById("searchGoogle").onclick=function(){return document.getElementById("searchGoogle").href="https://www.google.com/search?ie=UTF-8&q="+encodeURIComponent(e.value),e.focus(),!0},document.getElementById("translateGoogle").onclick=function(){return document.getElementById("translateGoogle").href="https://translate.google.com/#view=home&op=translate&sl=ko&tl=en&text="+encodeURIComponent(e.value),e.focus(),!0},document.getElementById("saveAsTextFile").onsubmit=function(){return document.getElementById("data").value=e.value,e.focus(),!0}}()</script>
